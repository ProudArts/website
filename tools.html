<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vehicle Remaining Mile Calculator</title>
    <style>
        body { 
            font-family: sans-serif; 
            padding: 20px; 
            background-color: #f4f4f4; 
            display: flex; 
            flex-direction: column;
            align-items: center; 
            margin: 0;
        }
        .container { 
            width: 100%;
            max-width: 850px; 
            background: white; 
            padding: 30px; 
            border-radius: 12px; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.1); 
        }
        h2 { margin-top: 0; color: #222; text-align: center; }
        
        .config-section {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
            border: 1px solid #ddd;
        }
        .config-toggle {
            display: block;
            margin: 0 auto 20px;
            background: none;
            border: 1px solid #999;
            color: #666;
            padding: 5px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.8rem;
        }

        .header-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-bottom: 10px;
            padding: 0 10px;
            font-weight: bold;
            color: #444;
            text-align: center;
        }

        .vehicle-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
            padding: 15px;
            background: #fff;
            border: 1px solid #eee;
            border-radius: 8px;
            align-items: center;
        }

        input { 
            width: 100%; 
            padding: 12px; 
            border: 1px solid #ccc; 
            border-radius: 6px; 
            box-sizing: border-box; 
            font-size: 1rem;
            text-align: center;
        }

        .result-cell {
            font-size: 1.2rem;
            font-weight: bold;
            color: #007bff;
            text-align: center;
        }

        .add-btn {
            display: block;
            width: 200px;
            margin: 20px auto;
            padding: 12px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
        }
        .add-btn:hover { background-color: #218838; }

        .info-text { 
            margin-top: 30px; 
            font-size: 0.9rem; 
            color: #555; 
            line-height: 1.6;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>Vehicle Remaining Mile Calculator</h2>
    
    <button class="config-toggle" onclick="toggleConfig()">⚙️ Advanced Settings</button>
    
    <div id="config" class="config-section">
        <label style="font-size: 0.9rem;">Estimated Max Lifespan (Miles):</label>
        <input type="number" id="lifespan" value="200000" style="width: 150px; margin-left: 10px;" oninput="calculateAll()">
    </div>

    <div class="header-row">
        <div>Asking Price ($)</div>
        <div>Current Mileage</div>
        <div>Cost per Mile</div>
    </div>

    <div id="vehicle-list">
        <div class="vehicle-row">
            <input type="number" class="price-input" placeholder="Price" oninput="calculateAll()">
            <input type="number" class="mileage-input" placeholder="Miles" oninput="calculateAll()">
            <div class="result-cell">-</div>
        </div>
    </div>

    <button class="add-btn" onclick="addRow()">+ Add Vehicle to Compare</button>

    <div class="info-text">
        <p><strong>How to use:</strong> This tool is designed to help you compare similar vehicles, specifically those of the same make, model, or year. It is most effective for comparing cars in the same class rather than different types of vehicles (like a sports car vs. a truck).</p>
        <p><strong>Method:</strong> We subtract the current mileage from the estimated lifespan (default 200,000 miles) to find the remaining life. We then divide the price by those miles to get your "unit cost." If you believe a specific vehicle will last longer or shorter, you can adjust the lifespan in the <strong>Advanced Settings</strong>.</p>
    </div>
</div>

<script>
    function toggleConfig() {
        const config = document.getElementById('config');
        config.style.display = config.style.display === 'block' ? 'none' : 'block';
    }

    function addRow() {
        const list = document.getElementById('vehicle-list');
        const rowCount = list.getElementsByClassName('vehicle-row').length;
        
        if (rowCount < 10) {
            const newRow = document.createElement('div');
            newRow.className = 'vehicle-row';
            newRow.innerHTML = `
                <input type="number" class="price-input" placeholder="Price" oninput="calculateAll()">
                <input type="number" class="mileage-input" placeholder="Miles" oninput="calculateAll()">
                <div class="result-cell">-</div>
            `;
            list.appendChild(newRow);
        } else {
            alert("Maximum of 10 vehicles reached.");
        }
    }

    function calculateAll() {
        const lifespan = parseFloat(document.getElementById('lifespan').value) || 200000;
        const rows = document.getElementsByClassName('vehicle-row');

        for (let row of rows) {
            const price = parseFloat(row.querySelector('.price-input').value);
            const mileage = parseFloat(row.querySelector('.mileage-input').value);
            const output = row.querySelector('.result-cell');

            if (isNaN(price) || isNaN(mileage) || mileage < 0) {
                output.innerText = "-";
                continue;
            }

            const remainingMiles = lifespan - mileage;

            if (remainingMiles <= 0) {
                output.innerText = "End of Life";
                output.style.color = "#dc3545";
            } else {
                const costPerMile = price / remainingMiles;
                output.innerText = "$" + costPerMile.toFixed(2);
                output.style.color = "#007bff";
            }
        }
    }
</script>

</body>
</html>
